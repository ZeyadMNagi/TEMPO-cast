<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Global TEMPO - NASA Air Quality Forecasting</title>
    <meta
      name="description"
      content="NASA TEMPO-powered air quality forecasting app integrating satellite, ground-based, and weather data to protect public health through real-time alerts and predictions."
    />
    <link rel="shortcut icon" href="../assets/logo.jpg" type="image/x-icon" />

    <!-- Leaflet CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <link id="rtl-stylesheet" rel="stylesheet" href="../css/rtl.css" disabled />
    <link rel="stylesheet" href="../css/app.css" />
    <link rel="stylesheet" href="../css/modal.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header>
      <nav>
        <a href="../index.html" class="logo" data-i18n="logo_text"
          >Global TEMPO</a
        >
        <button class="nav-toggle" id="navToggle" aria-label="Open menu">
          <span class="hamburger"></span>
        </button>
        <ul class="nav-links" id="navLinks">
          <li>
            <button class="nav-action-btn" onclick="showAbout()" data-i18n="nav_about">
              About
            </button>
          </li>
          <li>
            <a href="./TEMPOData.html" data-i18n="nav_tempo_data">
              TEMPO Data
            </a>
          </li>
          <li>
            <a href="../WHO.html" data-i18n="nav_who">WHO Instructions</a>
          </li>
          <li>
            <button class="nav-action-btn" onclick="toggleDataSources()" data-i18n="nav_data_sources">
              Data Sources
            </button>
          </li>
          <li><button id="lang-toggle-btn" class="nav-btn">English</button></li>
        </ul>
      </nav>
    </header>

    <div class="main-container">
      <div class="sidebar">
        <div class="sidebar-content">
          <div class="data-sources">
            <h3 data-i18n="sidebar_live_data">üì° Live Data Integration</h3>
            <div class="source-status">
              <span
                ><span class="status-indicator status-active"></span>NASA TEMPO
                Satellite</span
              >
              <small>Real-time NO‚ÇÇ, O‚ÇÉ</small>
            </div>
            <div class="source-status">
              <span
                ><span class="status-indicator status-active"></span>OpenWeather
                API</span
              >
              <small>Ground measurements</small>
            </div>
            <div class="source-status">
              <span
                ><span class="status-indicator status-limited"></span>Pandora
                Network</span
              >
              <small>Validation data</small>
            </div>
            <div class="source-status">
              <span
                ><span class="status-indicator status-active"></span>Weather
                Integration</span
              >
              <small>Meteorological factors</small>
            </div>
          </div>

          <div class="search-section">
            <label for="searchInput" data-i18n="sidebar_location_search"
              >üîç Location Search</label
            >
            <div class="search-container">
              <input
                type="text"
                id="searchInput"
                class="search-input"
                placeholder="Enter city, state, or coordinates..."
                data-i18n="search_placeholder"
                oninput="handleSearchInput(this.value)"
              />
              <div id="searchResults" class="search-results"></div>
            </div>
            <button
              class="location-btn"
              onclick="getUserLocation()"
              data-i18n="use_my_location"
            >
              üìç Use My Current Location
            </button>
            <div
              id="locationDisplay"
              class="location-display"
              style="display: none"
            ></div>
            <div id="loadingIndicator" class="loading hidden">
              <div class="spinner"></div>
              <span data-i18n="loading_text"
                >Integrating satellite and ground data...</span
              >
            </div>
            <div id="errorMessage" class="error hidden"></div>
          </div>

          <div id="pollutionSection" class="data-section">
            <h2
              id="cityName"
              class="section-title"
              data-i18n="section_title_current_aq"
            >
              üìä Current Air Quality
            </h2>
            <div id="aqiDisplay" class="aqi-display">
              <div class="aqi-value" id="aqiValue">--</div>
              <div class="aqi-label" data-i18n="aqi_label">
                Air Quality Index
              </div>
              <div
                id="aqiCategory"
                class="aqi-category"
                data-i18n="aqi_category_default"
              >
                Select location
              </div>
            </div>
            <div id="pollutionData"></div>
          </div>
          <div
            id="forecastSection"
            class="forecast-section"
            style="display: none"
          >
            <div class="forecast-header">
              <h3 class="forecast-title" data-i18n="section_title_forecast">
                üîÆ Air Quality Forecast
              </h3>
              <span class="forecast-time" id="forecastTime"></span>
            </div>
            <div class="forecast-grid" id="forecastGrid"></div>
          </div>
          <div id="healthSection" class="health-section" style="display: none">
            <h2 class="section-title" data-i18n="section_title_health">
              üè• Health Impact Assessment
            </h2>
            <div id="healthAlert"></div>
            <div id="recommendations" class="recommendations-list">
              <h4 data-i18n="section_title_recommendations">
                üí° Personalized Recommendations
              </h4>
              <ul id="recommendationsList"></ul>
            </div>
          </div>

          <div id="trendsSection" class="trends-section" style="display: none">
            <h2 class="section-title" data-i18n="section_title_trends">
              üìà Historical Trends
            </h2>
            <div id="trendsData"></div>
            <small
              style="color: #6b7280; margin-top: 10px; display: block"
              data-i1n="trends_disclaimer"
            >
              *Trends based on integrated satellite and ground observations
            </small>
          </div>
        </div>
      </div>

      <div class="map-container">
        <div id="map"></div>
        <div class="map-controls">
          <button
            class="map-control-btn"
            onclick="toggleSatelliteView()"
            data-i18n="map_btn_satellite"
          >
            üõ∞Ô∏è Satellite
          </button>
          <button
            class="map-control-btn"
            onclick="toggleGroundStations()"
            data-i18n="map_btn_stations"
          >
            üì° Stations
          </button>
          <button
            class="map-control-btn"
            onclick="showHeatMap()"
            data-i18n="map_btn_heatmap"
          >
            üå°Ô∏è Heat Map
          </button>
        </div>
      </div>
    </div>

    <!-- Modals -->
    <div id="pollutantModal" class="modal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeModal('pollutantModal')"
          >&times;</span
        >
        <div id="pollutantModalBody"></div>
      </div>
    </div>

    <div id="aboutModal" class="modal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeModal('aboutModal')"
          >&times;</span
        >
        <div id="aboutModalBody">
          <h2>About Global TEMPO</h2>
          <p><strong>NASA TEMPO Mission Integration</strong></p>
          <p>
            Global TEMPO leverages NASA's Tropospheric Emissions: Monitoring of
            Pollution (TEMPO) satellite mission to provide unprecedented air
            quality forecasting capabilities across North America.
          </p>

          <h3>Mission Objectives</h3>
          <ul>
            <li>
              <strong>Real-time Integration:</strong> Combines TEMPO satellite
              data with ground-based measurements
            </li>
            <li>
              <strong>Health Protection:</strong> Provides timely alerts to
              protect vulnerable populations
            </li>
            <li>
              <strong>Forecast Accuracy:</strong> Uses weather integration for
              improved predictions
            </li>
            <li>
              <strong>Community Impact:</strong> Supports public health
              decision-making
            </li>
          </ul>

          <h3>Data Sources & Validation</h3>
          <ul>
            <li>
              <strong>NASA TEMPO:</strong> Hourly NO‚ÇÇ, O‚ÇÉ, formaldehyde
              observations
            </li>
            <li>
              <strong>Ground Networks:</strong> OpenAQ, Pandora, TolNet
              validation data
            </li>
            <li>
              <strong>Weather Integration:</strong> Meteorological factors
              affecting pollutant transport
            </li>
            <li>
              <strong>Historical Analysis:</strong> Trend identification and
              seasonal patterns
            </li>
          </ul>

          <h3>Target Communities</h3>
          <ul>
            <li>
              Health-sensitive groups (children, elderly, respiratory
              conditions)
            </li>
            <li>School administrators and athletic coordinators</li>
            <li>Municipal leaders and policy makers</li>
            <li>Emergency response teams</li>
            <li>Industrial and transportation authorities</li>
          </ul>

          <p class="nasa-attribution">
            <strong>NASA TEMPO Mission:</strong> Revolutionizing air quality
            monitoring through space-based observations to protect public health
            and improve environmental understanding.
          </p>
        </div>
      </div>
    </div>

    <div id="dataSourcesModal" class="modal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeModal('dataSourcesModal')"
          >&times;</span
        >
        <div id="dataSourcesModalBody">
          <h2>üì° Integrated Data Sources</h2>

          <div class="data-source-detail">
            <h3>üõ∞Ô∏è NASA TEMPO Satellite</h3>
            <p>
              <strong>Status:</strong>
              <span class="status-indicator status-active"></span> Active
            </p>
            <p>
              <strong>Coverage:</strong> North America (hourly observations)
            </p>
            <p><strong>Parameters:</strong> NO‚ÇÇ, O‚ÇÉ, formaldehyde, aerosols</p>
            <p><strong>Resolution:</strong> ~4km at city-scale</p>
            <p>
              Primary satellite data source providing unprecedented temporal
              resolution for air quality monitoring.
            </p>
          </div>

          <div class="data-source-detail">
            <h3>Ground-Based Networks</h3>
            <p><strong>OpenAQ:</strong> Global ground station network</p>
            <p>
              <strong>Pandora:</strong> Direct-sun spectrometer network for
              validation
            </p>
            <p><strong>TolNet:</strong> Tropospheric ozone lidar network</p>
            <p>
              Ground-based measurements provide validation and calibration for
              satellite observations.
            </p>
          </div>

          <div class="data-source-detail">
            <h3>Weather Integration</h3>
            <p>
              <strong>Parameters:</strong> Wind speed/direction, temperature,
              humidity, pressure
            </p>
            <p>
              <strong>Purpose:</strong> Understanding pollutant transport and
              transformation
            </p>
            <p>
              <strong>Forecasting:</strong> Meteorological influence on air
              quality predictions
            </p>
          </div>

          <div class="data-source-detail">
            <h3>Data Processing & Validation</h3>
            <ul>
              <li>Real-time satellite-ground comparison</li>
              <li>Quality assurance and cloud screening</li>
              <li>Bias correction and calibration</li>
              <li>Uncertainty quantification</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div id="notificationModal" class="modal">
      <div class="modal-content notification-modal">
        <span class="modal-close" onclick="closeModal('notificationModal')"
          >&times;</span
        >
        <div class="notification-modal-header">
          <h2>üîî Get Personalized Air Quality Alerts</h2>
          <p>
            Stay informed about air quality changes in your area with
            customized notifications
          </p>
        </div>

        <form id="notificationForm" class="notification-form">
          <div class="form-section">
            <h3>üìß Contact Information</h3>
            <div class="form-group">
              <label for="userEmail">Email Address *</label>
              <input
                type="email"
                id="userEmail"
                name="email"
                placeholder="your.email@example.com"
                required
              />
            </div>

            <p class="section-description">
              We only send notifications via email.
            </p>
          </div>

          <!-- Notification Preferences -->
          <div class="form-section">
            <h3>‚úÖ Notification Method</h3>
            <div class="checkbox-group">
              <label class="checkbox-label">
                <input type="checkbox" name="notifyEmail" checked />
                <span>Email notifications</span>
              </label>
            </div>
          </div>

          <!-- Alert Frequency -->
          <div class="form-section">
            <h3>‚è∞ Alert Frequency</h3>
            <div class="radio-group">
              <label class="radio-label">
                <input type="radio" name="frequency" value="realtime" />
                <span
                  >Real-time (immediate alerts for significant changes)</span
                >
              </label>
              <label class="radio-label">
                <input type="radio" name="frequency" value="hourly" />
                <span>Hourly updates</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="frequency" value="daily" checked />
                <span>Daily summary (recommended)</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="frequency" value="weekly" />
                <span>Weekly summary</span>
              </label>
            </div>
          </div>

          <!-- Health Profile -->
          <div class="form-section">
            <h3>üè• Health Profile</h3>
            <p class="section-description">
              Help us personalize your alerts based on your health needs
            </p>

            <div class="form-group">
              <label>Do you have any of these conditions?</label>
              <div class="checkbox-group">
                <label class="checkbox-label">
                  <input
                    type="checkbox"
                    name="condition_asthma"
                    value="asthma"
                  />
                  <span>Asthma</span>
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" name="condition_copd" value="copd" />
                  <span>COPD (Chronic Obstructive Pulmonary Disease)</span>
                </label>
                <label class="checkbox-label">
                  <input
                    type="checkbox"
                    name="condition_heart"
                    value="heart"
                  />
                  <span>Heart disease</span>
                </label>
                <label class="checkbox-label">
                  <input
                    type="checkbox"
                    name="condition_allergies"
                    value="allergies"
                  />
                  <span>Severe allergies</span>
                </label>
                <label class="checkbox-label">
                  <input
                    type="checkbox"
                    name="condition_other"
                    value="other"
                  />
                  <span>Other respiratory condition</span>
                </label>
              </div>
            </div>
          </div>

          <!-- Submit Button -->
          <div class="form-actions">
            <button type="submit" class="btn-primary btn-large">
              üîî Start Receiving Alerts
            </button>
            <button
              type="button"
              class="btn-secondary"
              onclick="closeModal('notificationModal')"
            >
              Maybe Later
            </button>
          </div>
        </form>
      </div>
    </div>

    <footer>
      <div class="data-attribution">
        <strong>Data Sources:</strong>
        <a href="https://tempo.si.edu/" target="_blank">NASA TEMPO</a> ‚Ä¢
        <a href="https://openaq.org" target="_blank">OpenAQ</a> ‚Ä¢
        <a href="https://pandora.gsfc.nasa.gov/" target="_blank"
          >Pandora Network</a
        >
        ‚Ä¢
        <a href="https://www-air.larc.nasa.gov/TolNet.htm" target="_blank"
          >TolNet</a
        >
        ‚Ä¢
        <a href="https://openweathermap.org" target="_blank">OpenWeather</a>
      </div>
      <p>
        Global TEMPO - Protecting Public Health Through Space-Based Air Quality
        Monitoring -- Developed by
        <a href="mailto:zeyadnagi421@gmail.com">Zeyad M. Khattab</a>
      </p>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/esri-leaflet@3.0.11/dist/esri-leaflet.js"></script>
    <script src="../js/i18n.js?v=1.1"></script>

    <script src="../js/globalApp.js?v=1.1"></script>
    <script src="../js/modal.js?v=1.1"></script>
  </body>
</html>
