<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Global TEMPO - NASA Air Quality Forecasting</title>
    <meta
      name="description"
      content="NASA TEMPO-powered air quality forecasting app integrating satellite, ground-based, and weather data to protect public health through real-time alerts and predictions."
    />

    <!-- Leaflet CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <link rel="stylesheet" href="../css/app.css" />
  </head>
  <body>
    <header>
      <nav>
        <a href="../index.html" class="logo">Global TEMPO</a>
        <div class="nav-links">
          <button class="nav-btn" onclick="toggleDataSources()">
            Data Sources
          </button>
          <button class="nav-btn" onclick="showAbout()">About</button>
        </div>
      </nav>
    </header>

    <div class="main-container">
      <div class="sidebar">
        <div class="sidebar-content">
          <div class="data-sources">
            <h3>üì° Live Data Integration</h3>
            <div class="source-status">
              <span
                ><span class="status-indicator status-active"></span>NASA TEMPO
                Satellite</span
              >
              <small>Real-time NO‚ÇÇ, O‚ÇÉ</small>
            </div>
            <div class="source-status">
              <span
                ><span class="status-indicator status-active"></span>OpenWeather
                API</span
              >
              <small>Ground measurements</small>
            </div>
            <div class="source-status">
              <span
                ><span class="status-indicator status-limited"></span>Pandora
                Network</span
              >
              <small>Validation data</small>
            </div>
            <div class="source-status">
              <span
                ><span class="status-indicator status-active"></span>Weather
                Integration</span
              >
              <small>Meteorological factors</small>
            </div>
          </div>

          <div class="search-section">
            <label for="searchInput">üîç Location Search</label>
            <div class="search-container">
              <input
                type="text"
                id="searchInput"
                class="search-input"
                placeholder="Enter city, state, or coordinates..."
                oninput="handleSearchInput(this.value)"
              />
              <div id="searchResults" class="search-results"></div>
            </div>
            <button class="location-btn" onclick="getUserLocation()">
              üìç Use My Current Location
            </button>
            <div
              id="locationDisplay"
              class="location-display"
              style="display: none"
            ></div>
            <div id="loadingIndicator" class="loading hidden">
              <div class="spinner"></div>
              Integrating satellite and ground data...
            </div>
            <div id="errorMessage" class="error hidden"></div>
          </div>

          <div id="pollutionSection" class="data-section">
            <h2 id="cityName" class="section-title">üìä Current Air Quality</h2>
            <div id="aqiDisplay" class="aqi-display">
              <div class="aqi-value" id="aqiValue">--</div>
              <div class="aqi-label">Air Quality Index</div>
              <div id="aqiCategory" class="aqi-category">Select location</div>
            </div>
            <div id="pollutionData"></div>
          </div>
          <div
            id="forecastSection"
            class="forecast-section"
            style="display: none"
          >
            <div class="forecast-header">
              <h3 class="forecast-title">üîÆ Air Quality Forecast</h3>
              <span class="forecast-time" id="forecastTime"></span>
            </div>
            <div class="forecast-grid" id="forecastGrid"></div>
          </div>
          <div id="healthSection" class="health-section" style="display: none">
            <h2 class="section-title">üè• Health Impact Assessment</h2>
            <div id="healthAlert"></div>
            <div id="recommendations" class="recommendations-list">
              <h4>üí° Personalized Recommendations</h4>
              <ul id="recommendationsList"></ul>
            </div>
          </div>

          <div id="trendsSection" class="trends-section" style="display: none">
            <h2 class="section-title">üìà Historical Trends</h2>
            <div id="trendsData"></div>
            <small style="color: #6b7280; margin-top: 10px; display: block">
              *Trends based on integrated satellite and ground observations
            </small>
          </div>
        </div>
      </div>

      <div class="map-container">
        <div id="map"></div>
        <div class="map-controls">
          <button class="map-control-btn" onclick="toggleSatelliteView()">
            üõ∞Ô∏è Satellite
          </button>
          <button class="map-control-btn" onclick="toggleGroundStations()">
            üì° Stations
          </button>
          <button class="map-control-btn" onclick="showHeatMap()">
            üå°Ô∏è Heat Map
          </button>
        </div>
      </div>
    </div>

    <!-- Modals -->
    <div id="pollutantModal" class="modal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeModal('pollutantModal')"
          >&times;</span
        >
        <div id="pollutantModalBody"></div>
      </div>
    </div>

    <div id="aboutModal" class="modal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeModal('aboutModal')"
          >&times;</span
        >
        <div id="aboutModalBody">
          <h2>About Global TEMPO</h2>
          <p><strong>NASA TEMPO Mission Integration</strong></p>
          <p>
            Global TEMPO leverages NASA's Tropospheric Emissions: Monitoring of
            Pollution (TEMPO) satellite mission to provide unprecedented air
            quality forecasting capabilities across North America.
          </p>

          <h3>Mission Objectives</h3>
          <ul>
            <li>
              <strong>Real-time Integration:</strong> Combines TEMPO satellite
              data with ground-based measurements
            </li>
            <li>
              <strong>Health Protection:</strong> Provides timely alerts to
              protect vulnerable populations
            </li>
            <li>
              <strong>Forecast Accuracy:</strong> Uses weather integration for
              improved predictions
            </li>
            <li>
              <strong>Community Impact:</strong> Supports public health
              decision-making
            </li>
          </ul>

          <h3>Data Sources & Validation</h3>
          <ul>
            <li>
              <strong>NASA TEMPO:</strong> Hourly NO‚ÇÇ, O‚ÇÉ, formaldehyde
              observations
            </li>
            <li>
              <strong>Ground Networks:</strong> OpenAQ, Pandora, TolNet
              validation data
            </li>
            <li>
              <strong>Weather Integration:</strong> Meteorological factors
              affecting pollutant transport
            </li>
            <li>
              <strong>Historical Analysis:</strong> Trend identification and
              seasonal patterns
            </li>
          </ul>

          <h3>Target Communities</h3>
          <ul>
            <li>
              Health-sensitive groups (children, elderly, respiratory
              conditions)
            </li>
            <li>School administrators and athletic coordinators</li>
            <li>Municipal leaders and policy makers</li>
            <li>Emergency response teams</li>
            <li>Industrial and transportation authorities</li>
          </ul>

          <p class="nasa-attribution">
            <strong>NASA TEMPO Mission:</strong> Revolutionizing air quality
            monitoring through space-based observations to protect public health
            and improve environmental understanding.
          </p>
        </div>
      </div>
    </div>

    <div id="dataSourcesModal" class="modal">
      <div class="modal-content">
        <span class="modal-close" onclick="closeModal('dataSourcesModal')"
          >&times;</span
        >
        <div id="dataSourcesModalBody">
          <h2>üì° Integrated Data Sources</h2>

          <div class="data-source-detail">
            <h3>üõ∞Ô∏è NASA TEMPO Satellite</h3>
            <p>
              <strong>Status:</strong>
              <span class="status-indicator status-active"></span> Active
            </p>
            <p>
              <strong>Coverage:</strong> North America (hourly observations)
            </p>
            <p><strong>Parameters:</strong> NO‚ÇÇ, O‚ÇÉ, formaldehyde, aerosols</p>
            <p><strong>Resolution:</strong> ~4km at city-scale</p>
            <p>
              Primary satellite data source providing unprecedented temporal
              resolution for air quality monitoring.
            </p>
          </div>

          <div class="data-source-detail">
            <h3>Ground-Based Networks</h3>
            <p><strong>OpenAQ:</strong> Global ground station network</p>
            <p>
              <strong>Pandora:</strong> Direct-sun spectrometer network for
              validation
            </p>
            <p><strong>TolNet:</strong> Tropospheric ozone lidar network</p>
            <p>
              Ground-based measurements provide validation and calibration for
              satellite observations.
            </p>
          </div>

          <div class="data-source-detail">
            <h3>Weather Integration</h3>
            <p>
              <strong>Parameters:</strong> Wind speed/direction, temperature,
              humidity, pressure
            </p>
            <p>
              <strong>Purpose:</strong> Understanding pollutant transport and
              transformation
            </p>
            <p>
              <strong>Forecasting:</strong> Meteorological influence on air
              quality predictions
            </p>
          </div>

          <div class="data-source-detail">
            <h3>Data Processing & Validation</h3>
            <ul>
              <li>Real-time satellite-ground comparison</li>
              <li>Quality assurance and cloud screening</li>
              <li>Bias correction and calibration</li>
              <li>Uncertainty quantification</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <div class="data-attribution">
        <strong>Data Sources:</strong>
        <a href="https://tempo.si.edu/" target="_blank">NASA TEMPO</a> ‚Ä¢
        <a href="https://openaq.org" target="_blank">OpenAQ</a> ‚Ä¢
        <a href="https://pandora.gsfc.nasa.gov/" target="_blank"
          >Pandora Network</a
        >
        ‚Ä¢
        <a href="https://www-air.larc.nasa.gov/TolNet.htm" target="_blank"
          >TolNet</a
        >
        ‚Ä¢
        <a href="https://openweathermap.org" target="_blank">OpenWeather</a>
      </div>
      <p>
        Global TEMPO - Protecting Public Health Through Space-Based Air Quality
        Monitoring -- Developed by
        <a href="mailto:zeyadnagi421@gmail.com">Zeyad M. Khattab</a>
      </p>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="../js/globalApp.js"></script>
  </body>
</html>
